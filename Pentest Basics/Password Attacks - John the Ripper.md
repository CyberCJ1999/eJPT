## Password Attacks
**John the Ripper**
- popular password cracking tool
- can mount both brute force + dictionary based attacks against a password database
- encryption formats; john - -list=formats

- unauthorized access to Linux machine, we made a copy of the password files:
/etc/passwd that contains information about user accounts
/etc/shadow that contains the actual password hashes

**/etc/passwd**
- used to keep track of every registered user that has access to the system (Linux)

**/etc/shadow**
- file on the Linux machine where password hashes are stored

root:$1$/avpfBJ1$x0z8w5UF9Iv./DR9E9Lid.:14747:0:99999:7:::
daemon:*:14684:0:99999:7:::
bin:*:14684:0:99999:7:::
sys:$1$fUX6BPOt$Miyc3UpOzQJqz4s5wFD9l0:14742:0:99999:7:::

(only users with a password hash can log in - * or a ! cannot log in)

8 fields within the /etc/shadow file
- Username: login name
- Password: encrypted password
- Last password change: days since Jan 1 1970, that password was last changed
- Minimum: minimum number of days required between password changes i.e. the number of days left before the user is allowed to change his/her password
- Maximum: maximum number of days the password is valid (after that user is forced to change his/her password)
- Warn: the number of days before password is to expire that user is warned that his/her password must be changed
- Inactive: the number of days after password expires that account is disabled
- Expire: days since Jan 1 1970, that account is disabled
* * *
## Cracking Hashes (Unshadow /etc/shadow)
`unshadow [path to passwd] [path to shadow] > crackme`
- [path to passwd] copy of the /etc/passwd taken from target machine
- [path to shadow] copy of the /etc/shadow taken from target machine

**Brute Force with John the Ripper**
- crack the whole file `john - -format:<format> crackme`  (don’t need to specify a mode)
- cracking single user password file `john -incremental -users:victim crackme`
- display password recovered `john - -show crackme`
* * *
## Dictionary Attacks with John the Ripper
- dictionary attacks 
```
john -wordlist<=custom wordlist> <file to crack>
```

- crack the crackme file by using default wordlist + for users’ victim,victim2
```
john -wordlist -users=victim,victim2 crackme
```
* * *
## John the Ripper: Cracking User  Credentials
Demonstrate 2 ways in which we will crack the user credentials of a Linux user

**1st Method**
	- Crack the password for user "pavan"
	- Open the shadow file; cat /etc/shadow
	- Copy + paste the credentials into a txt file called crack.txt
	- Use John to crack it `john crack.txt`

**2nd Method**
	- Combine the /etc/passwd + /etc/shadow; unshadow /etc/passwd /etc/shadow crack.txt
	- Use both files so that John can use the information provided to efficiently crack the credentials of all users
	- Crack the credentials of all users
`john - -wordlist=/usr/share/john/password.lst crack.txt`
* * *
## John the Ripper: Formats
```
--format=raw-sha1 crack.txt

--format=raw-md5 rack.txt

--format=raw-md4 crack.txt

--format=raw-sha256 crack.txt

--format=ripemd-128 crack.txt

--format=whirlpool crack.txt
```
* * *
## John: Cracking Password Protected Zip Files/RAR Archive

**ZIP Files**
- Convert zip file into a hash format that John is able to understand using zip2john tool
`zip2john zipfile.zip > zip_hash.txt`

- Take the file from zip2john; zip_hash.txt 
`john --wordlist=/usr/share/wordlists/rockyou.txt zip_hash.txt`

**RAR Files**
- Compressed files created by the Winrar archive manager
- Compress a variety of folders/files

- Concert RAR file into a hash format that John is able to understand using rar2john tool
`rar2john rarfile.rar > rar_hash.txt`

- Take the file from rar2john; rar_hash.txt 
`john --wordlist=/usr/share/wordlists/rockyou.txt rar_hash.txt`